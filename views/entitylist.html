

<!-- Table header template-->
<script id="header_template" type="text/ng-template">
          <tr>
              <th ng-repeat="column in columns" ng-show="column.visible"
                  class="text-center sortable" ng-class="{
                      'sort-asc': tableParams.isSortBy(column.field, 'asc'),
                      'sort-desc': tableParams.isSortBy(column.field, 'desc')
                    }"
                  ng-click="tableParams.sorting(column.field, tableParams.isSortBy(column.field, 'asc') ? 'desc' : 'asc')" >
                  {{column.title}}
                  <div></div>
              </th>
              <!--<th>Columns:{{columns.length}}</th>-->
          </tr>
          <tr>
            <th ng-repeat="column in columns" ng-show="column.visible"
          </tr>

    <tr class="ng-table-filters">
    <th data-title-text="{{column.title}}" ng-repeat="column in columns" ng-show="column.visible" class="filter">
        <div ng-repeat="(name, filter) in column.filter">
            <div ng-if="filter.indexOf('/') !== -1" ng-include="filter"></div>
            <div ng-if="filter.indexOf('/') === -1" ng-include="'ng-table/filters/' + filter + '.html'"></div>
        </div>
    </th>
</tr>
</script>

<div class="row" ng-show="showTable">
    <div>
      <h2>{{title}}</h2>
    </div>
    <div style="width:100%;margin-left:50px">
          Columns:
          <span ng-repeat="column in columns">
            <input  type="checkbox" ng-model="column.visible" style="margin-left:10px"/> {{column.title}}
          </span>
      <a style="float:right;margin-right:80px;margin-bottom:10px" class="btn btn-primary" ng-click='csv.generate($event, "my-file.csv")' href='#' >
              Export to CSV
      </a>
    </div>
  <div class="col-lg-12">
    <div class="panel panel-default">
      <div class="panel-body">
        <div>
        
          <table ng-table="tableParams" show-filter="true" class="table" template-header="header_template" export-csv="csv" >
            <tbody>
              <tr ng-repeat="location in $data">
                <td ng-repeat="column in columns" ng-if="! column['excluded']" ng-show="column.visible" sortable="column.field" filter="{column.field:'text'}">
                  {{location[column.field]}}
                </td>        
                <td ng-repeat="column in exclude">
                  <button class="btn btn-default" ng-click="click(value+'/'+location['id']+'/'+column)"+>{{column}}</button>
                </td>               
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  <div>
    
  </div>
</div>